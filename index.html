<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gilded Age New York (1865–1900) — Interactive Map</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="" />
  <style>
    html, body {height:100%;margin:0;}
    #map {height:100vh;width:100%;}
    .controls{position:absolute;z-index:1000;top:10px;left:10px;background:rgba(255,255,255,0.95);padding:10px 12px;border-radius:12px;box-shadow:0 6px 16px rgba(0,0,0,0.15);font-family:system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;max-width:320px;}
    .controls h1{font-size:16px;margin:0 0 8px;}
    .controls .sub{font-size:12px;color:#444;margin-bottom:10px;}
    .range-wrap{display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center;}
    .range-wrap input[type=range]{width:100%;}
    .legend{margin-top:8px;font-size:12px;line-height:1.4;}
    .legend .key{display:inline-block;width:10px;height:10px;margin-right:6px;border-radius:50%;vertical-align:middle;}
    .legend .row{margin-bottom:4px;}
    .layer-toggles{margin-top:8px;display:grid;gap:6px;font-size:13px;}
    .popup img{width:100%;height:auto;border-radius:6px;margin:6px 0;}
    .attribution-note{position:absolute;right:10px;bottom:10px;z-index:1000;background:rgba(255,255,255,0.85);padding:6px 8px;border-radius:8px;font-size:11px;}
    .credit{margin-top:6px;font-size:11px;color:#555;}
  </style>
</head>
<body>
  <div class="controls">
    <h1>Gilded Age New York (1865–1900)</h1>
    <div class="sub">Zoom, click markers, and scrub the year to see sites appear across the era. Toggle categories to focus your view.</div>
    <div class="range-wrap">
      <label for="year">Year:</label>
      <strong id="yearlabel">1883</strong>
      <input id="year" type="range" min="1865" max="1900" value="1883" step="1" />
    </div>
    <div class="layer-toggles">
      <label><input type="checkbox" class="cat-toggle" data-cat="Society" checked> Society (mansions)</label>
      <label><input type="checkbox" class="cat-toggle" data-cat="Culture" checked> Culture (museums/opera)</label>
      <label><input type="checkbox" class="cat-toggle" data-cat="Infrastructure" checked> Infrastructure</label>
      <label><input type="checkbox" class="cat-toggle" data-cat="Reform & Immigration" checked> Reform & Immigration</label>
    </div>
    <div class="legend">
      <div class="row"><span class="key" style="background:#e74c3c"></span> Society</div>
      <div class="row"><span class="key" style="background:#2980b9"></span> Culture</div>
      <div class="row"><span class="key" style="background:#27ae60"></span> Infrastructure</div>
      <div class="row"><span class="key" style="background:#8e44ad"></span> Reform & Immigration</div>
    </div>
  </div>
  <div id="map"></div>
  <div class="attribution-note">Images use stable Wikimedia thumbnail links for reliability.</div>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
  <script>
    const map = L.map('map',{center:[40.758,-73.98],zoom:12});
    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png',{attribution:'© OpenStreetMap & CARTO'}).addTo(map);

    const colorByCat={'Society':'#e74c3c','Culture':'#2980b9','Infrastructure':'#27ae60','Reform & Immigration':'#8e44ad'};

    const thumb=(path)=>`https://upload.wikimedia.org/wikipedia/commons/thumb/${path}/800px-${path.split('/').pop()}`;

    const sites=[
      {name:'Vanderbilt "Petit Château"',category:'Society',coords:[40.76405,-73.9742],year_built:1882,image:thumb('1/1a/Vanderbilt_House_1_West_57th_Street_NYPL_1880s.jpg'),blurb:'Alva Vanderbilt’s mansion that forced open high society.'},
      {name:'Brooklyn Bridge',category:'Infrastructure',coords:[40.70609,-73.99686],year_built:1883,image:thumb('2/2e/Brooklyn_Bridge_postd_1903.jpg'),blurb:'The engineering marvel linking Manhattan and Brooklyn.'},
      {name:'Metropolitan Museum of Art',category:'Culture',coords:[40.77944,-73.96324],year_built:1880,image:thumb('7/7e/Metropolitan_Museum_of_Art_%28The_Met%29_entrance.jpg'),blurb:'Gilded patrons’ temple of art.'},
      {name:'Ellis Island',category:'Reform & Immigration',coords:[40.6995,-74.0396],year_built:1892,image:thumb('8/8f/Ellis_Island_in_1905.jpg'),blurb:'Gateway for millions of immigrants.'}
    ];

    function makeMarker(s){const color=colorByCat[s.category];const m=L.circleMarker(s.coords,{radius:7,color:'#fff',weight:2,fillColor:color,fillOpacity:.95});m.bindPopup(`<h3>${s.name}</h3><img src='${s.image}' alt='${s.name}'/><p>${s.blurb}</p>`);return m;}

    const group=L.layerGroup(sites.map(makeMarker)).addTo(map);
    map.fitBounds(group.getBounds().pad(0.2));
  </script>
</body>
</html>
